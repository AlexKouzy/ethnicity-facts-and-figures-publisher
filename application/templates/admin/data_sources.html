{% extends "base.html" %}
{% from "_shared/_breadcrumb.html" import breadcrumb %}

{% set breadcrumbs =
  [
    {"url": url_for("static_site.index"), "text": "Ethnicity facts and figures"},
    {"url": url_for('admin.index'), "text": "Admin"},
  ]
%}

{% block pageTitle %}{% if q %}{{ q }} - Search data sources{% else %}Data sources{% endif %}{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-xl">Data sources</h1>


      <form method="GET" action="{{ url_for('admin.data_sources' )}}">

        <div class="govuk-form-group">
          <label class="govuk-label" for="q">Search <span class="govuk-visually-hidden">data sources</span></label>
          <input class="govuk-input govuk-input--width-30" id="q" name="q" type="text" value="{{ q }}">
        </div>

        <button class="govuk-button">Filter</button>

      </form>

      <p class="govuk-body">{% if data_sources|length == 1 %}1 result{% else %}{{ '{:,}'.format(data_sources|length) }} results{% endif %}</p>

          <ul class="govuk-list">
            {% for data_source in data_sources %}

              <li>
                <div class="govuk-heading-s govuk-!-margin-bottom-2">{{ data_source.title }}</div>
                <div class="govuk-body">
                  {% if data_source.publication_date %}
                    <span class="eff-!-grey-1">Published on {{ data_source.publication_date }}</span>
                  {% endif %}
                  {% if data_source.source_url %}
                    <a class="govuk-link" href="{{ data_source.source_url }}">View publication</a>
                  {% endif %}
                </div>

              </li>

            {% endfor %}
          </ul>

    </div>
  </div>
{% endblock %}
