{# Required parameters: field, id_, name, class_, textarea, diffs, field_params #}

<div class="govuk-form-group {% if field.errors %}govuk-form-group--error{% endif %}">

{% if field.character_count_limit %}
<div class="govuk-character-count" data-module="character-count" data-maxlength="{{ field.character_count_limit }}">
{% endif %}

{{ field.label(id=field.id + '-label', class_='govuk-label') }}

{% if field.hint or hint | default(false) %}
  <span class="govuk-hint">{{ field.hint or hint }}</span>
{% endif %}

{% if field.errors %}
  <span class="govuk-error-message">{{ field.errors[0] }}</span>
{% endif %}

{{ field.extended_hint if field.extended_hint is defined and field.extended_hint else '' }}

{% if textarea %}
  <textarea id="{{ id_ }}" name="{{ name }}" class="govuk-textarea {{ class_ }}{% if field.errors %} govuk-textarea--error{% endif %}{% if field.character_count_limit %} js-character-count{% endif %}" {{ field_params }}>{{ value or "" }}</textarea>
{% else %}
  <input id="{{ id_ }}" name="{{ name }}" class="govuk-input {{ class_ }}{% if field.errors %} govuk-input--error{% endif %}" value="{{ value }}" {{ field_params }}>
{% endif %}

{% if diffs is defined and diffs and name in diffs %}
  <p class="govuk-body govuk-!-margin-top-4">Your update to "{{ field.label.text }}" is shown below, with detected additions and deletions emphasised. If these changes are fine, save the page, otherwise make further edits above and then save.</p>
  <div class="govuk-body eff-diffs">
      {{ diffs[name] }}
  </div>
{% endif %}

{% if field.character_count_limit %}
  <span id="{{ id_ }}-info" class="govuk-hint govuk-character-count__message" aria-live="polite">Please try to keep within {{ field.character_count_limit }} characters.</span>
</div>
{% endif %}

</div>
